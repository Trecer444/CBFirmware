# CBFirmware

**CBFirmware** ‚Äî –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ **STM32F405RGT6**, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–µ—Å—Ç—å—é —Å–∏–ª–æ–≤—ã–º–∏ –≤—ã—Ö–æ–¥–∞–º–∏ –Ω–∞ –º–æ—Ç–æ—Ü–∏–∫–ª–µ **BMW F800GS**. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ **CAN-—à–∏–Ω–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–∂–∏–≥–∞–Ω–∏—è, —Å–≤–µ—Ç–∞ –∏ –ø—Ä.) –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏. –ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ –ø–æ USB —Å –ø–æ–º–æ—â—å—é –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ **OpenBLT**. –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `Prog/Core/Src`.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 6 —Å–∏–ª–æ–≤—ã–º–∏ –≤—ã—Ö–æ–¥–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CAN-–∫–æ–º–∞–Ω–¥
- –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ —á–µ—Ä–µ–∑ USB
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é —É—Ç–∏–ª–∏—Ç—É

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

- ‚öôÔ∏è –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å: [CBHardware](https://github.com/Trecer444/CBHardware)
- üñ• GUI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: [CBGUISettings](https://github.com/Trecer444/CBGUISettings)
- üöÄ –ó–∞–≥—Ä—É–∑—á–∏–∫: [OpenBLT](https://github.com/feaser/openblt)

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
CBFirmware/
‚îú‚îÄ‚îÄ .ioc                          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CubeMX
‚îú‚îÄ‚îÄ Core/                         # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è HAL
‚îú‚îÄ‚îÄ Drivers/                      # HAL/CMSIS
‚îú‚îÄ‚îÄ Prog/
‚îÇ   ‚îî‚îÄ‚îÄ Core/
‚îÇ       ‚îú‚îÄ‚îÄ Src/ (main, settings, outputch)
‚îÇ       ‚îî‚îÄ‚îÄ Inc/
‚îú‚îÄ‚îÄ Boot/                         # –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ OpenBLT
‚îú‚îÄ‚îÄ Host/                         # BootCommander.exe –¥–ª—è USB-–ø—Ä–æ—à–∏–≤–∫–∏
```

## üõ† –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [STM32CubeIDE v1.18.1](https://www.st.com/en/development-tools/stm32cubeide.html)
- ST-Link –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏
- USB –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑—á–∏–∫

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:
   ```bash
   git clone https://github.com/Trecer444/CBFirmware.git
   ```
2. –û—Ç–∫—Ä—ã—Ç—å –æ–±–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ STM32CubeIDE (`CBFirmware` –∏ `Boot`)
3. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
4. –ü–µ—Ä–≤–∏—á–Ω–æ –ø—Ä–æ—à–∏—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫ (`Boot`) —á–µ—Ä–µ–∑ ST-Link
5. –î–∞–ª–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Host/BootCommander.exe` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ USB

## üîå USB-–ø—Ä–æ—à–∏–≤–∫–∞ (OpenBLT)

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–ª–∞—Ç—É –ø–æ USB
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `BootCommander.exe` –∏–∑ –ø–∞–ø–∫–∏ `Host`
3. –í—ã–±–µ—Ä–∏—Ç–µ `.hex` –ø—Ä–æ—à–∏–≤–∫—É –∏ –Ω—É–∂–Ω—ã–π COM-–ø–æ—Ä—Ç
4. –ù–∞–∂–º–∏—Ç–µ "Start" –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **GNU GPLv3**. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. —Ñ–∞–π–ª [LICENSE](./LICENSE).
